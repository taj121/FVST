%!TEX root = FVST.tex
\chapter*{Appendix}

\section*{Simple Swap}

\subsection*{Full intermediate code}

The substitutions to run this code through the behaviour checker are given in table \ref{subs}. 

\begin{lstlisting} 
tau;tau;tau;spn (B101);tau;spn (B118);tau;spn (B134)

Cswap1' ~ S105,
Cswap2' ~ S106,
Cswap3 ~ S126,
tau < B41,
tau < B57,
tau < B85,
psh ($l1$, S105) < B108,
psh ($l2$, S106) < B110,
psh ($l3$, S126) < B128,
psh ($l3$, S126) < B144,
R116 ! T103 < B112,
R117 ! T104 < B113,
R131 ! int < B129,
R147 ! int < B145,
R114 ? T103 < B109,
R115 ? T104 < B111,
R132 ? T125 < B130,
R148 ? T141 < B146,
tau;tau;B123;tau < B118,
tau;tau;B128;tau;tau;tau;B129;tau;tau;B130 < B123,
tau;tau;B139;tau < B134,
tau;tau;B144;tau;tau;tau;B145;tau;tau;B146 < B139,
rec B101(tau;tau;B108;tau;tau;B109;tau;tau;B110;tau;tau;B111;tau;tau;tau;B112;tau;tau;tau;B113;tau;tau;B101) < B101,
$l1$ ~ R114,
$l1$ ~ R117,
$l2$ ~ R115,
$l2$ ~ R116,
$l3$ ~ R131,
$l3$ ~ R132,
$l3$ ~ R147,
$l3$ ~ R148
\end{lstlisting}

\subsection*{Full output from behaviour checker}

Out from behaviour checker where substitutions are made prior to running.
\begin{lstlisting}
Behaviours:
 Tau; Tau; Tau; Spn( B101 ); Tau; Spn( B118 ); Tau; Spn( B134 )

Behaviour constraints:
Paired: 
Beta: B144 
Behaviour: Psh ( l3, ! int ? int end )
Paired: 
Beta: B113 
Behaviour: R117 ! int
Paired: 
Beta: B128 
Behaviour: Psh ( l3, ! int ? int end )
Paired: 
Beta: B146 
Behaviour: R148 ? int
Paired: 
Beta: B41 
Behaviour: Tau
Paired: 
Beta: B123 
Behaviour: Tau; Tau; B128 ; Tau; Tau; Tau; B129 ; Tau; Tau; B130
Paired: 
Beta: B57 
Behaviour: Tau
Paired: 
Beta: B101 
Behaviour: rec B101 Tau; Tau; B108 ; Tau; Tau; B109 ; Tau; Tau; B110 ; Tau; Tau; B111 ; Tau; Tau; Tau; B112 ; Tau; Tau; Tau; B113 ; Tau; Tau; B101
Paired: 
Beta: B118 
Behaviour: Tau; Tau; B123 ; Tau
Paired: 
Beta: B134 
Behaviour: Tau; Tau; B139 ; Tau
Paired: 
Beta: B139 
Behaviour: Tau; Tau; B144 ; Tau; Tau; Tau; B145 ; Tau; Tau; B146
Paired: 
Beta: B111 
Behaviour: R115 ? int
Paired: 
Beta: B110 
Behaviour: Psh ( l2, ? int ! int end )
Paired: 
Beta: B129 
Behaviour: R131 ! int
Paired: 
Beta: B109 
Behaviour: R114 ? int
Paired: 
Beta: B85 
Behaviour: Tau
Paired: 
Beta: B108 
Behaviour: Psh ( l1, ? int ! int end )
Paired: 
Beta: B112 
Behaviour: R116 ! int
Paired: 
Beta: B145 
Behaviour: R147 ! int
Paired: 
Beta: B130 
Behaviour: R132 ? int
Region Constraints:
 label: l3
 regions:
	R132,R148,R131,R147,abel: l2
 regions:
	R116,R115
label: l1
 regions:
	R117,R114

Type Constraints:
 
check successful!
\end{lstlisting}

\section*{Swap Delegation}

\subsection*{Full intermeditate code}

The substitutions for this code to be run through the behaviour checker are given in table \ref{subs2}.

\begin{lstlisting}
tau;tau;tau;spn (B118);tau;spn (B132);tau;spn (B163)

unit <  ses R151,
unit <  ses R182,
Cswap1' ~ S120,
Cswap2' ~ S121,
Cswap3 ~ S142,
tau < B38,
tau < B74,
tau < B102,
psh ($l1$, S120) < B123,
psh ($l2$, S121) < B125,
psh ($l3$, S142) < B144,
psh ($l3$, S142) < B175,
R152 ! int < B146,
R155 ! int < B149,
R183 ! int < B177,
R186 ! int < B180,
R151 ? T160 < B145,
R154 ? T157 < B148,
R182 ? T191 < B176,
R185 ? T188 < B179,
R130 ! R131 < B127,
R153 ? $l4$ < B147,
R184 ? $l4$ < B178,
R128 ! $SWAP$ < B124,
R129 ! $LEAD$ < B126,
tau;tau;B137;tau < B132,
tau;tau;B144;tau;R150? optn {($SWAP$ ; tau;tau;tau;tau;tau;B146;B145), ($LEAD$ ; tau;tau;B147;tau;tau;B148;tau;tau;tau;B149;tau)} < B137,
tau;tau;B168;tau < B163,
tau;tau;B175;tau;R181? optn {($SWAP$ ; tau;tau;tau;tau;tau;B177;B176), ($LEAD$ ; tau;tau;B178;tau;tau;B179;tau;tau;tau;B180;tau)} < B168,
rec B118(tau;tau;B123;tau;B124;tau;tau;B125;tau;B126;tau;tau;tau;B127;tau;tau;B118) < B118,
$l1$ ~ R128,
$l1$ ~ R131,
$l2$ ~ R129,
$l2$ ~ R130,
$l3$ ~ R150,
$l3$ ~ R152,
$l3$ ~ R153,
$l3$ ~ R181,
$l3$ ~ R183,
$l3$ ~ R184,
$l4$ ~ R154,
$l4$ ~ R155,
$l4$ ~ R185,
$l4$ ~ R186
\end{lstlisting}

\subsection*{Full output from behaviour checker}
Out from behaviour checker where substitutions are made prior to running.

\begin{lstlisting}

Behaviours:
Tau; Tau; Tau; Spn( B118 ) ; Tau; Spn( B132 ) ; Tau; Spn( B163 )
Behaviour constraints:

Paired: 
Beta: B132 
Behaviour: Tau; Tau; B137 ; Tau
Paired: 
Beta: B102 
Behaviour: Tau
Paired: 
Beta: B144 
Behaviour: Psh ( l3, +[ (SWAP;? int ? int end )  (LEAD;? ? int ! int end end ) ][ ]  )
Paired: 
Beta: B137 
Behaviour: Tau; Tau; B144 ; Tau; R150 ? optn [(SWAP;Tau; Tau; Tau; Tau; Tau; B146 ; B145) (LEAD;Tau; Tau; B147 ; Tau; Tau; B148 ; Tau; Tau; Tau; B149 ; Tau) ]
Paired: 
Beta: B38 
Behaviour: Tau
Paired: 
Beta: B179 
Behaviour: R185 ? int
Paired: 
Beta: B126 
Behaviour: R129 ! LEAD
Paired: 
Beta: B125 
Behaviour: Psh ( l2, (+)[ (SWAP;? int ! int end )  (LEAD;! ? int ! int end end ) ]  )
Paired: 
Beta: B146 
Behaviour: R152 ! int
Paired: 
Beta: B123 
Behaviour: Psh ( l1, (+)[ (SWAP;? int ! int end )  (LEAD;! ? int ! int end end ) ]  )
Paired: 
Beta: B177 
Behaviour: R183 ! int
Paired: 
Beta: B124 
Behaviour: R128 ! SWAP
Paired: 
Beta: B168 
Behaviour: Tau; Tau; B175 ; Tau; R181 ? optn [(SWAP;Tau; Tau; Tau; Tau; Tau; B177 ; B176) (LEAD;Tau; Tau; B178 ; Tau; Tau; B179 ; Tau; Tau; Tau; B180 ; Tau) ]
Paired: 
Beta: B176 
Behaviour: R182 ? int
Paired: 
Beta: B127 
Behaviour: R130 ! R131
Paired: 
Beta: B118 
Behaviour: rec B118 Tau; Tau; B123 ; Tau; B124 ; Tau; Tau; B125 ; Tau; B126 ; Tau; Tau; Tau; B127 ; Tau; Tau; B118
Paired: 
Beta: B74 
Behaviour: Tau
Paired: 
Beta: B149 
Behaviour: R155 ! int
Paired: 
Beta: B180 
Behaviour: R186 ! int
Paired: 
Beta: B147 
Behaviour: R153 ? l4
Paired: 
Beta: B178 
Behaviour: R184 ? l4
Paired: 
Beta: B163 
Behaviour: Tau; Tau; B168 ; Tau
Paired: 
Beta: B148 
Behaviour: R154 ? int
Paired: 
Beta: B175 
Behaviour: Psh ( l3, +[ (SWAP;? int ? int end )  (LEAD;? ? int ! int end end ) ][ ]  )
Paired: 
Beta: B145 
Behaviour: R151 ? int
Region Constraints:
 label: l4
 regions:
R154,R185,R186,R155
label: l3
 regions:
R152,R183,R184,R181,R150,R153
label: l2
 regions:
R129,R130
label: l1
 regions:
R128,R131

Type Constraints:
 
Paired: 
Super: ses R182 sub: 
 unit 
Paired: 
Super: ses R151 sub: 
 unit 
out rule
stack frame incorrect for current behaviour
ERROR: Failed Check


\end{lstlisting}


\section*{TLS}

\subsection*{Full intermediate code}
The substitutions for this code to be run through the behaviour checker are given in table \ref{tLSSubs}.

\begin{lstlisting}
tau;tau;tau;spn (B182);tau;spn (B210)

Ctsl1 ~ S190,
Ctsl2' ~ S216,
tau < B20,
tau < B61,
tau < B74,
tau < B111,
tau < B124,
tau < B137,
tau < B150,
tau < B177,
psh ($l1$, S190) < B192,
psh ($l2$, S216) < B218,
R201 ! int < B193,
R206 ! int < B198,
R207 ! int < B199,
R228 ! int < B220,
R229 ! int < B221,
R230 ! int < B222,
R231 ! int < B223,
R234 ! int < B226,
R202 ? T185 < B194,
R203 ? T186 < B195,
R204 ? T187 < B196,
R205 ? T188 < B197,
R208 ? T209 < B200,
R227 ? T213 < B219,
R232 ? T214 < B224,
R233 ? T215 < B225,
tau;tau;B192;tau;tau;tau;B193;tau;tau;B194;tau;tau;B195;tau;tau;B196;tau;tau;B197;tau;tau;tau;B198;tau;tau;tau;B199;tau;tau;B200 < B182,
tau;tau;B218;tau;tau;B219;tau;tau;tau;B220;tau;tau;tau;B221;tau;tau;tau;B222;tau;tau;tau;B223;tau;tau;B224;tau;tau;B225;tau;tau;tau;B226 < B210,
$l1$ ~ R201,
$l1$ ~ R202,
$l1$ ~ R203,
$l1$ ~ R204,
$l1$ ~ R205,
$l1$ ~ R206,
$l1$ ~ R207,
$l1$ ~ R208,
$l2$ ~ R227,
$l2$ ~ R228,
$l2$ ~ R229,
$l2$ ~ R230,
$l2$ ~ R231,
$l2$ ~ R232,
$l2$ ~ R233,
$l2$ ~ R234

\end{lstlisting}


\subsection*{Full output from behaviour checker}
Out from behaviour checker where substitutions are made prior to running.

\begin{lstlisting}
Behaviours:
Tau; Tau; Tau; Spn(B182); Tau; Spn(B210)

Behaviour constraints:
Paired: 
	Beta: B194 
	Behaviour: R202 ? int
Paired: 
	Beta: B200 
	Behaviour: R208 ? int
Paired: 
	Beta: B137 
	Behaviour: Tau
Paired: 
	Beta: B196 
	Behaviour: R204 ? int
Paired: 
	Beta: B219 
	Behaviour: R227 ? int
Paired: 
	Beta: B193 
	Behaviour: R201 ! int
Paired: 
	Beta: B197 
	Behaviour: R205 ? int
Paired: 
	Beta: B198 
	Behaviour: R206 ! int
Paired: 
	Beta: B195 
	Behaviour: R203 ? int
Paired: 
	Beta: B124 
	Behaviour: Tau
Paired: 
	Beta: B177 
	Behaviour: Tau
Paired: 
	Beta: B199 
	Behaviour: R207 ! int
Paired: 
	Beta: B220 
	Behaviour: R228 ! int
Paired: 
	Beta: B61 
	Behaviour: Tau
Paired: 
	Beta: B192 
	Behaviour: Psh(l1, ! int ? int ? int ? int ? int ! int ! int ? int end)
Paired: 
	Beta: B226 
	Behaviour: R234 ! int
Paired: 
	Beta: B74 
	Behaviour: Tau
Paired: 
	Beta: B111 
	Behaviour: Tau
Paired: 
	Beta: B225 
	Behaviour: R233 ? int
Paired: 
	Beta: B20 
	Behaviour: Tau
Paired: 
	Beta: B223 
	Behaviour: R231 ! int
Paired: 
	Beta: B150 
	Behaviour: Tau
Paired: 
	Beta: B224 
	Behaviour: R232 ? int
Paired: 
	Beta: B182 
	Behaviour: Tau; Tau; B192; Tau; Tau; Tau; B193; Tau; Tau; B194; Tau; Tau; B195; Tau; Tau; B196; Tau; Tau; B197; Tau; Tau; Tau; B198; Tau; Tau; Tau; B199; Tau; Tau; B200
Paired: 
	Beta: B218 
	Behaviour: Psh(l2, ? int ! int ! int ! int ! int ? int ? int ! int end)
Paired: 
	Beta: B221 
	Behaviour: R229 ! int
Paired: 
	Beta: B222 
	Behaviour: R230 ! int
Paired: 
	Beta: B210 
	Behaviour: Tau; Tau; B218; Tau; Tau; B219; Tau; Tau; Tau; B220; Tau; Tau; Tau; B221; Tau; Tau; Tau; B222; Tau; Tau; Tau; B223; Tau; Tau; B224; Tau; Tau; B225; Tau; Tau; Tau; B226
Region Constraints:
 label: l2
 regions:
R228,R230,R231,R229,R234,R232,R227,R233
label: l1
 regions:
R205,R201,R204,R207,R202,R203,R206,R208

Type Constraints:
 

check successful!

\end{lstlisting}
