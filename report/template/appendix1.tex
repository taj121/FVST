%!TEX root = FVST.tex
\chapter*{Appendix}

\section*{Simple Swap}

\subsection*{Full intmediate code}

The substitutions to run this code through the behaviour checker are given in \ref{subs}. 

\begin{lstlisting} 
tau;tau;tau;spn (B101);tau;spn (B118);tau;spn (B134)

Cswap1' ~ S105,
Cswap2' ~ S106,
Cswap3 ~ S126,
tau < B41,
tau < B57,
tau < B85,
psh ($l1$, S105) < B108,
psh ($l2$, S106) < B110,
psh ($l3$, S126) < B128,
psh ($l3$, S126) < B144,
R116 ! T103 < B112,
R117 ! T104 < B113,
R131 ! int < B129,
R147 ! int < B145,
R114 ? T103 < B109,
R115 ? T104 < B111,
R132 ? T125 < B130,
R148 ? T141 < B146,
tau;tau;B123;tau < B118,
tau;tau;B128;tau;tau;tau;B129;tau;tau;B130 < B123,
tau;tau;B139;tau < B134,
tau;tau;B144;tau;tau;tau;B145;tau;tau;B146 < B139,
rec B101(tau;tau;B108;tau;tau;B109;tau;tau;B110;tau;tau;B111;tau;tau;tau;B112;tau;tau;tau;B113;tau;tau;B101) < B101,
$l1$ ~ R114,
$l1$ ~ R117,
$l2$ ~ R115,
$l2$ ~ R116,
$l3$ ~ R131,
$l3$ ~ R132,
$l3$ ~ R147,
$l3$ ~ R148
\end{lstlisting}

\subsection*{Full output from behaviour checker}

Out from behaviour checker where substitutions are made prior to running.
\begin{lstlisting}
Behaviours:
 Tau; Tau; Tau; Spn( B101 ); Tau; Spn( B118 ); Tau; Spn( B134 )

Behaviour constraints:
Paired: 
Beta: B144 
Behaviour: Psh ( l3, ! int ? int end )
Paired: 
Beta: B113 
Behaviour: R117 ! int
Paired: 
Beta: B128 
Behaviour: Psh ( l3, ! int ? int end )
Paired: 
Beta: B146 
Behaviour: R148 ? int
Paired: 
Beta: B41 
Behaviour: Tau
Paired: 
Beta: B123 
Behaviour: Tau; Tau; B128 ; Tau; Tau; Tau; B129 ; Tau; Tau; B130
Paired: 
Beta: B57 
Behaviour: Tau
Paired: 
Beta: B101 
Behaviour: rec B101 Tau; Tau; B108 ; Tau; Tau; B109 ; Tau; Tau; B110 ; Tau; Tau; B111 ; Tau; Tau; Tau; B112 ; Tau; Tau; Tau; B113 ; Tau; Tau; B101
Paired: 
Beta: B118 
Behaviour: Tau; Tau; B123 ; Tau
Paired: 
Beta: B134 
Behaviour: Tau; Tau; B139 ; Tau
Paired: 
Beta: B139 
Behaviour: Tau; Tau; B144 ; Tau; Tau; Tau; B145 ; Tau; Tau; B146
Paired: 
Beta: B111 
Behaviour: R115 ? int
Paired: 
Beta: B110 
Behaviour: Psh ( l2, ? int ! int end )
Paired: 
Beta: B129 
Behaviour: R131 ! int
Paired: 
Beta: B109 
Behaviour: R114 ? int
Paired: 
Beta: B85 
Behaviour: Tau
Paired: 
Beta: B108 
Behaviour: Psh ( l1, ? int ! int end )
Paired: 
Beta: B112 
Behaviour: R116 ! int
Paired: 
Beta: B145 
Behaviour: R147 ! int
Paired: 
Beta: B130 
Behaviour: R132 ? int
Region Constraints:
 label: l3
 regions:
	R132
	R148
	R131
	R147
label: l2
 regions:
	R116
	R115
label: l1
 regions:
	R117
	R114

Type Constraints:
 
check successful!
\end{lstlisting}

\section*{Swap Delegation}

\subsection*{Full intermeditate code}

The substitutions for this code to be run through the behaviour checker are given in \ref{subs2}.

\begin{lstlisting}
tau;tau;tau;spn (B118);tau;spn (B132);tau;spn (B163)

unit <  ses R151,
unit <  ses R182,
Cswap1' ~ S120,
Cswap2' ~ S121,
Cswap3 ~ S142,
tau < B38,
tau < B74,
tau < B102,
psh ($l1$, S120) < B123,
psh ($l2$, S121) < B125,
psh ($l3$, S142) < B144,
psh ($l3$, S142) < B175,
R152 ! int < B146,
R155 ! int < B149,
R183 ! int < B177,
R186 ! int < B180,
R151 ? T160 < B145,
R154 ? T157 < B148,
R182 ? T191 < B176,
R185 ? T188 < B179,
R130 ! R131 < B127,
R153 ? $l4$ < B147,
R184 ? $l4$ < B178,
R128 ! $SWAP$ < B124,
R129 ! $LEAD$ < B126,
tau;tau;B137;tau < B132,
tau;tau;B144;tau;R150? optn {($SWAP$ ; tau;tau;tau;tau;tau;B146;B145), ($LEAD$ ; tau;tau;B147;tau;tau;B148;tau;tau;tau;B149;tau)} < B137,
tau;tau;B168;tau < B163,
tau;tau;B175;tau;R181? optn {($SWAP$ ; tau;tau;tau;tau;tau;B177;B176), ($LEAD$ ; tau;tau;B178;tau;tau;B179;tau;tau;tau;B180;tau)} < B168,
rec B118(tau;tau;B123;tau;B124;tau;tau;B125;tau;B126;tau;tau;tau;B127;tau;tau;B118) < B118,
$l1$ ~ R128,
$l1$ ~ R131,
$l2$ ~ R129,
$l2$ ~ R130,
$l3$ ~ R150,
$l3$ ~ R152,
$l3$ ~ R153,
$l3$ ~ R181,
$l3$ ~ R183,
$l3$ ~ R184,
$l4$ ~ R154,
$l4$ ~ R155,
$l4$ ~ R185,
$l4$ ~ R186
\end{lstlisting}

\subsection*{Full output from behaviour checker}

\begin{lstlisting}

Behaviours:
Tau; Tau; Tau; Spn( B118 ) ; Tau; Spn( B132 ) ; Tau; Spn( B163 )
Behaviour constraints:

Paired: 
Beta: B132 
Behaviour: Tau; Tau; B137 ; Tau
Paired: 
Beta: B102 
Behaviour: Tau
Paired: 
Beta: B144 
Behaviour: Psh ( l3, +[ (SWAP;? int ? int end )  (LEAD;? ? int ! int end end ) ][ ]  )
Paired: 
Beta: B137 
Behaviour: Tau; Tau; B144 ; Tau; R150 ? optn [(SWAP;Tau; Tau; Tau; Tau; Tau; B146 ; B145) (LEAD;Tau; Tau; B147 ; Tau; Tau; B148 ; Tau; Tau; Tau; B149 ; Tau) ]
Paired: 
Beta: B38 
Behaviour: Tau
Paired: 
Beta: B179 
Behaviour: R185 ? int
Paired: 
Beta: B126 
Behaviour: R129 ! LEAD
Paired: 
Beta: B125 
Behaviour: Psh ( l2, (+)[ (SWAP;? int ! int end )  (LEAD;! ? int ! int end end ) ]  )
Paired: 
Beta: B146 
Behaviour: R152 ! int
Paired: 
Beta: B123 
Behaviour: Psh ( l1, (+)[ (SWAP;? int ! int end )  (LEAD;! ? int ! int end end ) ]  )
Paired: 
Beta: B177 
Behaviour: R183 ! int
Paired: 
Beta: B124 
Behaviour: R128 ! SWAP
Paired: 
Beta: B168 
Behaviour: Tau; Tau; B175 ; Tau; R181 ? optn [(SWAP;Tau; Tau; Tau; Tau; Tau; B177 ; B176) (LEAD;Tau; Tau; B178 ; Tau; Tau; B179 ; Tau; Tau; Tau; B180 ; Tau) ]
Paired: 
Beta: B176 
Behaviour: R182 ? int
Paired: 
Beta: B127 
Behaviour: R130 ! R131
Paired: 
Beta: B118 
Behaviour: rec B118 Tau; Tau; B123 ; Tau; B124 ; Tau; Tau; B125 ; Tau; B126 ; Tau; Tau; Tau; B127 ; Tau; Tau; B118
Paired: 
Beta: B74 
Behaviour: Tau
Paired: 
Beta: B149 
Behaviour: R155 ! int
Paired: 
Beta: B180 
Behaviour: R186 ! int
Paired: 
Beta: B147 
Behaviour: R153 ? l4
Paired: 
Beta: B178 
Behaviour: R184 ? l4
Paired: 
Beta: B163 
Behaviour: Tau; Tau; B168 ; Tau
Paired: 
Beta: B148 
Behaviour: R154 ? int
Paired: 
Beta: B175 
Behaviour: Psh ( l3, +[ (SWAP;? int ? int end )  (LEAD;? ? int ! int end end ) ][ ]  )
Paired: 
Beta: B145 
Behaviour: R151 ? int
Region Constraints:
 label: l4
 regions:
R154
R185
R186
R155
label: l3
 regions:
R152
R183
R184
R181
R150
R153
label: l2
 regions:
R129
R130
label: l1
 regions:
R128
R131

Type Constraints:
 
Paired: 
Super: ses R182 sub: 
 unit 
Paired: 
Super: ses R151 sub: 
 unit 
out rule
stack frame incorrect for current behaviour
ERROR: Failed Check


\end{lstlisting}
